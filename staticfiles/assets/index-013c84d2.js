import{r as c,j as e}from"./react-aa903b52.js";import{c as I}from"./react-dom-77454c81.js";/* empty css                  *//* empty css                     */import{F as L,a as R,b as C,c as E,d as G,e as B,f as H,g as M,h as $,i as U,j as z,k as J,l as A,m as F,n as K}from"./react-icons-e028e5e0.js";import{L as g,u as V,a as W,R as q,b as v,B as _}from"./react-router-232aec0d.js";import{a as f}from"./axios-439bb627.js";import"./firebase-82447129.js";import{i as Z,g as Q,G as X,s as D}from"./@firebase-597cf0c0.js";import"./cookie-54e8227e.js";import"./scheduler-765c72db.js";import"./idb-81bdbf9b.js";import"./tslib-6635c9de.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const d of t)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function o(t){const d={};return t.integrity&&(d.integrity=t.integrity),t.referrerPolicy&&(d.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?d.credentials="include":t.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(t){if(t.ep)return;t.ep=!0;const d=o(t);fetch(t.href,d)}})();const Y=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"];function ee({location:s,setLocation:n}){const[o,a]=c.useState([]),t=m=>{const p=m.target.value;if(n(p),p.length>0){const u=Y.filter(l=>l.toLowerCase().startsWith(p.toLowerCase()));a(u)}else a([])},d=m=>{n(m),a([])};return e.jsxs("div",{className:"location-container",children:[e.jsx("input",{type:"text",className:"location-input",placeholder:"Enter Location",value:s,onChange:t}),o.length>0&&e.jsx("ul",{className:"suggestions-list",children:o.map((m,p)=>e.jsx("li",{onClick:()=>d(m),children:m},p))})]})}function se(){return e.jsxs("div",{className:"search-group",children:[e.jsx("input",{type:"text",className:"search-input",placeholder:"Search products..."}),e.jsxs("button",{className:"search-btn",children:[e.jsx(L,{className:"search-icon"})," Search"]})]})}function te(){return e.jsxs("ul",{className:"nav-links",children:[e.jsx("li",{children:e.jsx(g,{to:"/",children:"Home"})}),e.jsxs("li",{className:"dropdown",children:[e.jsx("span",{children:"Categories ▾"}),e.jsxs("ul",{className:"dropdown-menu",children:[e.jsx("li",{children:e.jsx(g,{to:"/men",children:"Men"})}),e.jsx("li",{children:e.jsx(g,{to:"/women",children:"Women"})}),e.jsx("li",{children:e.jsx(g,{to:"/kids",children:"Kids"})})]})]}),e.jsx("li",{children:e.jsx(g,{to:"/contact",children:"Contact"})}),e.jsx("li",{style:{marginRight:"3px"},children:e.jsx(g,{to:"/wholesale",children:"Wholesale"})})]})}const ne={apiKey:"AIzaSyAermKP0NQbh3I5HJPI3klEzF5OcpzaXmc",authDomain:"wholesale-market-5848e.firebaseapp.com",projectId:"wholesale-market-5848e",storageBucket:"wholesale-market-5848e.firebasestorage.app",messagingSenderId:"835474282185",appId:"1:835474282185:web:6f64630037c132a1fa1f18",measurementId:"G-5VFMHQ38ZG"},oe=Z(ne),re=Q(oe),ae=new X;function ie(){const[s,n]=c.useState(!1),[o,a]=c.useState(""),[t,d]=c.useState(""),[m,p]=c.useState(!1),[u,l]=c.useState(""),[h,x]=c.useState(!1),[b,j]=c.useState(!1),N=V();f.defaults.withCredentials=!0,c.useEffect(()=>{const r=localStorage.getItem("user");console.log(r?"🔄 User found in localStorage. Redirecting to /login":"🔄 Checking Django session...")},[]);const S=async()=>{try{console.log("Google Sign-In started...");const O=await(await D(re,ae)).user.getIdToken();console.log("Google Token:",O);const k=await f.post("http://127.0.0.1:8000/api/google-login/",{token:O});k.data.status==="Success"?console.log("Google Login Success:",k.data):(console.error("Google Login Failed:",k.data.message),l("Google login failed."))}catch(r){console.error("Google Auth Error:",r),l("Google authentication failed.")}},P=()=>{f.post("http://127.0.0.1:8000/api/logout/").then(()=>{console.log("✅ User logged out. Redirecting to /login")}).catch(r=>console.error("🚨 Logout Error:",r))},y=async()=>{x(!0),l("");try{console.log("Sending OTP to:",o);const r=await f.post("http://127.0.0.1:8000/api/send-otp/",{email:o});console.log("OTP Sent Response:",r.data),p(!0)}catch(r){console.error("Error Sending OTP:",r),l("Error sending OTP.")}finally{x(!1)}},i=async()=>{j(!0),l("");try{console.log("Verifying OTP for:",o);const r=await f.post("http://127.0.0.1:8000/api/verify-otp/",{email:o,otp:t});console.log("OTP Verification Response:",r.data),r.data.status==="Verified"?(console.log("✅ OTP Verified Successfully!"),N("/user-login")):(console.error("❌ OTP is invalid!"),l("❌ OTP is invalid! Please try again."))}catch(r){console.error("OTP Verification Error:",r),l("❌ OTP verification failed!")}finally{j(!1)}};return e.jsxs("div",{className:"authbuttons-container",children:[e.jsxs("div",{className:"authbuttons-wrapper",children:[localStorage.getItem("vendor")?e.jsx("button",{className:"signup-btn",onClick:()=>{console.log("✅ Vendor exists in localStorage. Redirecting to /vendor-homepage..."),N("/vendor-homepage")},children:"Vendor"}):e.jsx("button",{className:"signup-btn",onClick:()=>{console.log("🚨 Vendor not found in localStorage. Redirecting to /vendor-dashboard for registration..."),N("/vender-dashboard")},children:"Vendor"}),localStorage.getItem("user")?e.jsx("button",{className:"login-btn",onClick:P,children:"Logout"}):e.jsx("button",{className:"login-btn",onClick:()=>n(!0),children:"Login"})]}),s&&e.jsxs("div",{className:"authbuttons-popup",children:[e.jsx("span",{className:"authbuttons-close-btn",onClick:()=>n(!1),children:"×"}),e.jsx("h3",{className:"authbuttons-popup-title",children:"User Login"}),e.jsx("input",{type:"email",className:"authbuttons-input",placeholder:"Enter Email",value:o,onChange:r=>a(r.target.value)}),m&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",className:"authbuttons-input",placeholder:"Enter OTP",value:t,onChange:r=>d(r.target.value),maxLength:"6"}),e.jsx("button",{className:"authbuttons-resend-btn",onClick:y,disabled:h,children:"Resend OTP"})]}),m?e.jsx("button",{className:"authbuttons-verify-btn",onClick:i,disabled:b,children:b?"Verifying OTP...":"Verify OTP"}):e.jsx("button",{className:"authbuttons-send-btn",onClick:y,disabled:h,children:h?"Sending OTP...":"Send OTP"}),e.jsx("div",{className:"google-signin",children:e.jsxs("button",{className:"google-btn",onClick:S,children:[e.jsx(R,{className:"google-icon"})," Sign Up with Google"]})}),u&&e.jsx("p",{className:"auth-error",children:u})]})]})}function T(){const[s,n]=c.useState(!1),[o,a]=c.useState("");return e.jsx("nav",{className:"navbar",children:e.jsxs("div",{className:"navbar-container",children:[e.jsxs("div",{className:"navbar-left",children:[e.jsx("span",{className:"brand-name",children:"WholesaleMarket"}),e.jsx(ee,{location:o,setLocation:a})]}),e.jsx(se,{}),e.jsxs("div",{className:`navbar-right ${s?"open":""}`,children:[e.jsx(te,{}),e.jsx(ie,{})]}),e.jsx("button",{className:"menu-btn",onClick:()=>n(!s),children:s?e.jsx(C,{}):e.jsx(E,{})})]})})}function le(){return e.jsx("div",{children:e.jsx(T,{})})}function w(){return e.jsx("nav",{className:"vendorregistration-navbar",children:e.jsx("div",{className:"vendorregistration-left",children:e.jsx("span",{className:"vendorregistration-logo",children:"Vendor Portal"})})})}function ce({formData:s,errors:n,handleChange:o,sendOtp:a,otpSent:t,nextStep:d}){return e.jsxs("div",{className:"vendorform-step",children:[e.jsx("h3",{children:"Step 1: Personal Information"}),e.jsx("input",{type:"text",name:"firstName",placeholder:"First Name",value:s.firstName,onChange:o,className:"vendorform-input"}),n.firstName&&e.jsx("p",{className:"error-text",children:n.firstName}),e.jsx("input",{type:"text",name:"lastName",placeholder:"Last Name",value:s.lastName,onChange:o,className:"vendorform-input"}),n.lastName&&e.jsx("p",{className:"error-text",children:n.lastName}),e.jsxs("div",{children:[e.jsx("input",{type:"tel",name:"mobile",placeholder:"Mobile Number",value:s.mobile,onChange:o,className:"vendorform-input"}),e.jsx("button",{onClick:a,className:"otp-btn",children:"Send OTP"})]}),n.mobile&&e.jsx("p",{className:"error-text",children:n.mobile}),!t&&n.otp&&e.jsx("p",{className:"error-text",children:n.otp}),t&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"otp",placeholder:"Enter OTP",value:s.otp,onChange:o,className:"vendorform-input"}),n.otp&&e.jsx("p",{className:"error-text",children:n.otp})]}),e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:s.email,onChange:o,className:"vendorform-input"}),n.email&&e.jsx("p",{className:"error-text",children:n.email}),e.jsx("button",{onClick:d,className:"vendorform-btn",children:"Next"})]})}function de({formData:s,errors:n,handleChange:o,prevStep:a,nextStep:t}){const[d,m]=c.useState([]);c.useState(!1);const p=async l=>{if(!(l.length<3))try{const x=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${l}`)).json();m(x)}catch(h){console.error("Error fetching address suggestions:",h)}},u=async l=>{o({target:{name:"shopAddress",value:l.display_name}});const h=l.address&&l.address.postcode?l.address.postcode:"";o({target:{name:"pincode",value:h}}),m([])};return e.jsxs("div",{className:"vendorform-step",children:[e.jsx("h3",{children:"Step 2: Shop & Tax Details"}),e.jsx("input",{type:"text",name:"shopName",placeholder:"Shop Name",value:s.shopName,onChange:o,className:"vendorform-input"}),n.shopName&&e.jsx("p",{className:"error-text",children:n.shopName}),e.jsx("input",{type:"text",name:"shopAddress",placeholder:"Enter Shop Address",value:s.shopAddress,onChange:l=>{o(l),p(l.target.value)},className:"vendorform-input"}),n.shopAddress&&e.jsx("p",{className:"error-text",children:n.shopAddress}),d.length>0&&e.jsx("ul",{className:"suggestions-list",children:d.map(l=>e.jsx("li",{onClick:()=>u(l),children:l.display_name},l.place_id))}),e.jsx("input",{type:"text",name:"shopFullAddress",placeholder:"Enter Full Shop Address (Optional)",value:s.shopFullAddress,onChange:o,className:"vendorform-input"}),e.jsx("input",{type:"text",name:"pincode",placeholder:"Pincode",value:s.pincode,onChange:o,className:"vendorform-input"}),n.pincode&&e.jsx("p",{className:"error-text",children:n.pincode}),e.jsx("input",{type:"text",name:"panNumber",placeholder:"PAN Number",value:s.panNumber,onChange:o,className:"vendorform-input"}),n.panNumber&&e.jsx("p",{className:"error-text",children:n.panNumber}),e.jsx("input",{type:"text",name:"gstNumber",placeholder:"GST Number (Optional)",value:s.gstNumber,onChange:o,className:"vendorform-input"}),n.gstNumber&&e.jsx("p",{className:"error-text",children:n.gstNumber}),e.jsx("button",{onClick:a,className:"vendorform-btn-back",children:"Back"}),e.jsx("button",{onClick:t,className:"vendorform-btn",children:"Next"})]})}function me(){const[s,n]=c.useState(1),o=V(),[a,t]=c.useState({firstName:"",lastName:"",shopName:"",shopAddress:"",shopFullAddress:"",gstNumber:"",pincode:"",mobile:"",otp:"",email:"",panNumber:""}),[d,m]=c.useState({}),[p,u]=c.useState(!1),[l,h]=c.useState(!1),x=()=>{let i={};return s===1&&(a.firstName.trim()||(i.firstName="First Name is required."),a.lastName.trim()||(i.lastName="Last Name is required."),a.mobile.match(/^\d{10}$/)||(i.mobile="Enter a valid 10-digit mobile number."),!p&&!a.otp&&(i.otp="Please enter the OTP."),a.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)||(i.email="Enter a valid email address.")),s===2&&(a.shopName.trim()||(i.shopName="Shop Name is required."),a.shopAddress.trim()||(i.shopAddress="Shop Address is required."),a.pincode.match(/^\d{6}$/)||(i.pincode="Enter a valid 6-digit Pincode."),a.panNumber.match(/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/)||(i.panNumber="Enter a valid PAN Number.")),m(i),Object.keys(i).length===0},b=async()=>{try{console.log("🔄 Checking vendor session...");const i=await f.get("http://127.0.0.1:8000/api/check-vendor-session/",{withCredentials:!0});console.log("🟢 Vendor session response:",i.data),i.data.loggedIn?(console.log("✅ Vendor is authenticated, redirecting to /vendor-homepage"),localStorage.setItem("vendor",JSON.stringify(i.data)),h(!0),o("/vendor-homepage")):(console.log("❌ Vendor not authenticated, showing registration form"),localStorage.removeItem("vendor"),h(!1))}catch(i){console.error("🚨 Vendor session check failed:",i),localStorage.removeItem("vendor"),h(!1)}};c.useEffect(()=>{localStorage.getItem("vendor")?(console.log("🟢 Vendor found in localStorage, redirecting to /vendor-homepage"),o("/vendor-homepage")):b()},[]);const j=i=>{t({...a,[i.target.name]:i.target.value}),m({...d,[i.target.name]:""})},N=()=>{fetch("http://127.0.0.1:8000/api/send-otp-vendor/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email})}).then(i=>i.json()).then(()=>{u(!0),alert("OTP sent to your email!")}).catch(i=>console.error("OTP Send Failed:",i))},S=()=>{x()&&n(s+1)},P=()=>n(s-1),y=async()=>{if(!x())return;const i=Object.fromEntries(Object.entries(a).map(([r,O])=>[r,O||null]));try{console.log("📤 Submitting vendor registration:",i);const r=await f.post("http://127.0.0.1:8000/api/register-vendor/",i,{withCredentials:!0});console.log("🟢 Registration successful:",r.data),console.log(localStorage.getItem("vendor")),r.data.vendor_id?(localStorage.setItem("vendor",JSON.stringify(r.data)),o("/vendor-homepage")):(console.error("❌ Registration failed:",r.data.message),alert("Registration failed. Please check your inputs."))}catch(r){console.error("🚨 Registration Error:",r),r.response&&r.response.data.errors?(console.log("🛑 Backend Errors:",r.response.data.errors),m(r.response.data.errors)):alert("An error occurred during registration.")}};return e.jsxs("div",{className:"vendorform-container",children:[e.jsx("h2",{className:"vendorform-title",children:"Vendor Registration"}),e.jsx("div",{className:"step-indicator",children:["Personal Info","Shop & Tax Details","Confirmation"].map((i,r)=>e.jsxs("div",{className:`step ${s>=r+1?"active":""}`,children:[r+1,". ",i]},r))}),s===1&&e.jsx(ce,{formData:a,errors:d,handleChange:j,sendOtp:N,otpSent:p,nextStep:S}),s===2&&e.jsx(de,{formData:a,errors:d,handleChange:j,prevStep:P,nextStep:S}),s===3&&e.jsxs("div",{className:"vendorform-step",children:[e.jsx("h3",{children:"Step 3: Confirmation"}),e.jsx("p",{children:"Please review all details before submitting."}),e.jsx("button",{onClick:P,className:"vendorform-btn-back",children:"Back"}),e.jsx("button",{onClick:y,className:"vendorform-submit-btn",children:"Submit"})]})]})}function pe(){return e.jsxs("div",{children:[e.jsx(w,{}),e.jsx(me,{})]})}function he(){return e.jsx("div",{children:e.jsx(pe,{})})}function ue(){const[s,n]=c.useState(!1),[o,a]=c.useState(null),[t,d]=c.useState(0),[m,p]=c.useState(3);V(),c.useEffect(()=>{try{const l=JSON.parse(localStorage.getItem("vendor"));l&&(a(l),d(l.products||0))}catch(l){console.error("Error fetching vendor data:",l)}},[]);const u=()=>{n(!s)};return e.jsxs("nav",{className:"vendorregistration-navbar",children:[e.jsx("div",{className:"vendorregistration-left",children:e.jsx("span",{className:"vendorregistration-logo",children:"Vendor Portal"})}),e.jsx("div",{className:"vendorregistration-menu-toggle",onClick:u,children:s?e.jsx(C,{}):e.jsx(E,{})}),e.jsxs("div",{className:`vendorregistration-right ${s?"open":""}`,children:[e.jsx(g,{to:"/vender-dashboard",className:"vendorregistration-home-btn",children:"Dashboard"}),e.jsxs("div",{className:"vendorregistration-products",children:[e.jsx(G,{className:"icon"}),e.jsxs("span",{children:["Products: ",t]})]}),e.jsxs("div",{className:"vendorregistration-notifications",children:[e.jsx(B,{className:"icon"}),m>0&&e.jsx("span",{className:"notification-badge",children:m})]}),e.jsxs(g,{to:"/vendor-profile",className:"vendorregistration-profile",children:[o!=null&&o.profilePic?e.jsx("img",{src:o.profilePic,alt:"Vendor",className:"profile-img"}):e.jsx(H,{className:"icon"}),e.jsx("span",{children:(o==null?void 0:o.name)||"Vendor"})]})]})]})}function ge(){return e.jsx("div",{children:e.jsx(ue,{})})}function xe(){return e.jsxs("div",{children:[e.jsx(w,{}),e.jsx("h2",{children:"Login Page"})]})}function fe(){return e.jsx("div",{children:e.jsx(xe,{})})}const je=()=>{const[s,n]=c.useState(null),[o,a]=c.useState(!0);return c.useEffect(()=>{fetch("http://127.0.0.1:8000/api/check-vendor-session/",{credentials:"include"}).then(t=>t.json()).then(t=>{console.log("🟢 Vendor profile response:",t),t.loggedIn?n({firstName:t.firstName||"Not Provided",lastName:t.lastName||"Not Provided",shopName:t.shopName||"Not Provided",shopAddress:t.shopAddress||"No Address",shopFullAddress:t.shopFullAddress||"No Full Address",pincode:t.pincode||"Not Provided",mobile:t.mobile||"Not Provided",email:t.email||"Not Provided",panNumber:t.panNumber||"Not Provided",gstNumber:t.gstNumber||"Not Provided",businessType:t.businessType||"Not Provided"}):(console.warn("⚠️ Vendor not authenticated. Redirecting..."),window.location.href="/vendor-login"),a(!1)}).catch(t=>{console.error("❌ Error fetching vendor profile:",t),a(!1)})},[]),o?e.jsx("p",{className:"text-center text-blue-500 animate-pulse",children:"🔄 Loading Vendor Profile..."}):e.jsx("div",{className:"vendor-profile-container",children:e.jsx("div",{className:"vendor-profile-card",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"profile-pic-container",children:e.jsx(M,{className:"default-profile-icon"})}),e.jsxs("h2",{className:"vendor-name",children:[s.firstName," ",s.lastName]}),e.jsxs("p",{className:"vendor-shop",children:[e.jsx($,{})," ",s.shopName]}),e.jsxs("div",{className:"vendor-details",children:[e.jsxs("p",{children:[e.jsx(U,{className:"icon"})," ",e.jsx("strong",{children:"Email:"})," ",s.email]}),e.jsxs("p",{children:[e.jsx(z,{className:"icon"})," ",e.jsx("strong",{children:"Mobile:"})," ",s.mobile]}),e.jsxs("p",{children:[e.jsx(J,{className:"icon"})," ",e.jsx("strong",{children:"Business Type:"})," ",s.businessType]}),e.jsxs("p",{children:[e.jsx(A,{className:"icon"})," ",e.jsx("strong",{children:"Address:"})," ",s.shopAddress]}),e.jsxs("p",{children:[e.jsx(A,{className:"icon"})," ",e.jsx("strong",{children:"Full Address:"})," ",s.shopFullAddress]}),e.jsxs("p",{children:[e.jsx(A,{className:"icon"})," ",e.jsx("strong",{children:"Pincode:"})," ",s.pincode]}),e.jsxs("p",{children:[e.jsx(F,{className:"icon"})," ",e.jsx("strong",{children:"PAN Number:"})," ",s.panNumber]}),e.jsxs("p",{children:[e.jsx(F,{className:"icon"})," ",e.jsx("strong",{children:"GST Number:"})," ",s.gstNumber]})]}),e.jsxs("button",{className:"edit-profile-btn",children:[e.jsx(K,{})," Edit Profile"]})]}):e.jsx("p",{className:"text-red-500 font-semibold",children:"⚠️ No vendor data available."})})})};function Ne(){const s=W(),n=["/vender-dashboard","/user-login","/","/vendor-homepage","/vendor-profile"].includes(s.pathname);return e.jsxs(e.Fragment,{children:[!n&&e.jsx(T,{})," ",e.jsxs(q,{children:[e.jsx(v,{path:"/",element:e.jsx(le,{})}),e.jsx(v,{path:"/vender-dashboard",element:e.jsx(he,{})}),e.jsx(v,{path:"/user-login",element:e.jsx(fe,{})}),e.jsx(v,{path:"/vendor-homepage",element:e.jsx(ge,{})}),e.jsx(v,{path:"/vendor-profile",element:e.jsx(je,{})})]})]})}I.createRoot(document.getElementById("root")).render(e.jsx(_,{children:e.jsx(Ne,{})}));
