import{r as m,j as e}from"./react-aa903b52.js";import{c as w}from"./react-dom-77454c81.js";/* empty css                  *//* empty css                     */import{F as L,a as I,b as F,c as V}from"./react-icons-d8f23c26.js";import{L as f,u as A,a as R,R as G,b as O,B as H}from"./react-router-232aec0d.js";import{a as N}from"./axios-439bb627.js";import"./firebase-82447129.js";import{i as B,g as $,G as M,s as J}from"./@firebase-597cf0c0.js";import"./cookie-54e8227e.js";import"./scheduler-765c72db.js";import"./idb-81bdbf9b.js";import"./tslib-6635c9de.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const U=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"];function W({location:t,setLocation:s}){const[n,a]=m.useState([]),o=d=>{const p=d.target.value;if(s(p),p.length>0){const g=U.filter(r=>r.toLowerCase().startsWith(p.toLowerCase()));a(g)}else a([])},i=d=>{s(d),a([])};return e.jsxs("div",{className:"location-container",children:[e.jsx("input",{type:"text",className:"location-input",placeholder:"Enter Location",value:t,onChange:o}),n.length>0&&e.jsx("ul",{className:"suggestions-list",children:n.map((d,p)=>e.jsx("li",{onClick:()=>i(d),children:d},p))})]})}function K(){return e.jsxs("div",{className:"search-group",children:[e.jsx("input",{type:"text",className:"search-input",placeholder:"Search products..."}),e.jsxs("button",{className:"search-btn",children:[e.jsx(L,{className:"search-icon"})," Search"]})]})}function q(){return e.jsxs("ul",{className:"nav-links",children:[e.jsx("li",{children:e.jsx(f,{to:"/",children:"Home"})}),e.jsxs("li",{className:"dropdown",children:[e.jsx("span",{children:"Categories ▾"}),e.jsxs("ul",{className:"dropdown-menu",children:[e.jsx("li",{children:e.jsx(f,{to:"/men",children:"Men"})}),e.jsx("li",{children:e.jsx(f,{to:"/women",children:"Women"})}),e.jsx("li",{children:e.jsx(f,{to:"/kids",children:"Kids"})})]})]}),e.jsx("li",{children:e.jsx(f,{to:"/contact",children:"Contact"})}),e.jsx("li",{style:{marginRight:"3px"},children:e.jsx(f,{to:"/wholesale",children:"Wholesale"})})]})}const z={apiKey:"AIzaSyAermKP0NQbh3I5HJPI3klEzF5OcpzaXmc",authDomain:"wholesale-market-5848e.firebaseapp.com",projectId:"wholesale-market-5848e",storageBucket:"wholesale-market-5848e.firebasestorage.app",messagingSenderId:"835474282185",appId:"1:835474282185:web:6f64630037c132a1fa1f18",measurementId:"G-5VFMHQ38ZG"},Z=B(z),_=$(Z),Q=new M;function X(){const[t,s]=m.useState(!1),[n,a]=m.useState(""),[o,i]=m.useState(""),[d,p]=m.useState(!1),[g,r]=m.useState(""),[u,j]=m.useState(!1),[v,b]=m.useState(!1),h=A();N.defaults.withCredentials=!0;const l=async()=>{try{const c=await N.get("http://127.0.0.1:8000/api/check-session/");console.log("Session Check Response:",c.data),c.data.status==="Authenticated"?(localStorage.setItem("user",JSON.stringify(c.data)),h("/login")):(localStorage.removeItem("user"),h("/login"))}catch(c){console.error("Session Error:",c),localStorage.removeItem("user"),h("/login")}};m.useEffect(()=>{localStorage.getItem("user")?(console.log("🔄 User found in localStorage. Redirecting to /login"),h("/login")):(console.log("🔄 Checking Django session..."),l())},[]);const x=async()=>{try{console.log("Google Sign-In started...");const k=await(await J(_,Q)).user.getIdToken();console.log("Google Token:",k);const P=await N.post("http://127.0.0.1:8000/api/google-login/",{token:k});P.data.status==="Success"?(console.log("Google Login Success:",P.data),localStorage.setItem("user",JSON.stringify(P.data)),h("/login")):(console.error("Google Login Failed:",P.data.message),r("Google login failed."))}catch(c){console.error("Google Auth Error:",c),r("Google authentication failed.")}},S=()=>{N.post("http://127.0.0.1:8000/api/logout/").then(()=>{localStorage.removeItem("user"),console.log("✅ User logged out. Redirecting to /login"),h("/login")}).catch(c=>console.error("🚨 Logout Error:",c))},y=async()=>{j(!0),r("");try{console.log("Sending OTP to:",n);const c=await N.post("http://127.0.0.1:8000/api/send-otp/",{email:n});console.log("OTP Sent Response:",c.data),p(!0)}catch(c){console.error("Error Sending OTP:",c),r("Error sending OTP.")}finally{j(!1)}},T=async()=>{b(!0),r("");try{console.log("Verifying OTP for:",n);const c=await N.post("http://127.0.0.1:8000/api/verify-otp/",{email:n,otp:o});console.log("OTP Verification Response:",c.data),c.data.status==="Verified"?(console.log("✅ OTP Verified Successfully!"),h("/user-login")):(console.error("❌ OTP is invalid!"),r("❌ OTP is invalid! Please try again."))}catch(c){console.error("OTP Verification Error:",c),r("❌ OTP verification failed!")}finally{b(!1)}};return e.jsxs("div",{className:"authbuttons-container",children:[e.jsxs("div",{className:"authbuttons-wrapper",children:[e.jsx("button",{className:"signup-btn",onClick:()=>h("/vender-dashboard"),children:"Vendor"}),localStorage.getItem("user")?e.jsx("button",{className:"login-btn",onClick:S,children:"Logout"}):e.jsx("button",{className:"login-btn",onClick:()=>s(!0),children:"Login"})]}),t&&e.jsxs("div",{className:"authbuttons-popup",children:[e.jsx("span",{className:"authbuttons-close-btn",onClick:()=>s(!1),children:"×"}),e.jsx("h3",{className:"authbuttons-popup-title",children:"User Login"}),e.jsx("input",{type:"email",className:"authbuttons-input",placeholder:"Enter Email",value:n,onChange:c=>a(c.target.value)}),d&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",className:"authbuttons-input",placeholder:"Enter OTP",value:o,onChange:c=>i(c.target.value),maxLength:"6"}),e.jsx("button",{className:"authbuttons-resend-btn",onClick:y,disabled:u,children:"Resend OTP"})]}),d?e.jsx("button",{className:"authbuttons-verify-btn",onClick:T,disabled:v,children:v?"Verifying OTP...":"Verify OTP"}):e.jsx("button",{className:"authbuttons-send-btn",onClick:y,disabled:u,children:u?"Sending OTP...":"Send OTP"}),e.jsx("div",{className:"google-signin",children:e.jsxs("button",{className:"google-btn",onClick:x,children:[e.jsx(I,{className:"google-icon"})," Sign Up with Google"]})}),g&&e.jsx("p",{className:"auth-error",children:g})]})]})}function C(){const[t,s]=m.useState(!1),[n,a]=m.useState("");return e.jsx("nav",{className:"navbar",children:e.jsxs("div",{className:"navbar-container",children:[e.jsxs("div",{className:"navbar-left",children:[e.jsx("span",{className:"brand-name",children:"WholesaleMarket"}),e.jsx(W,{location:n,setLocation:a})]}),e.jsx(K,{}),e.jsxs("div",{className:`navbar-right ${t?"open":""}`,children:[e.jsx(q,{}),e.jsx(X,{})]}),e.jsx("button",{className:"menu-btn",onClick:()=>s(!t),children:t?e.jsx(F,{}):e.jsx(V,{})})]})})}function Y(){return e.jsx("div",{children:e.jsx(C,{})})}function E(){return e.jsxs("nav",{className:"vendorregistration-navbar",children:[e.jsx("div",{className:"vendorregistration-left",children:e.jsx("span",{className:"vendorregistration-logo",children:"Vendor Portal"})}),e.jsx("div",{className:"vendorregistration-right",children:e.jsx(f,{to:"/",className:"vendorregistration-home-btn",children:"Home"})})]})}function D({formData:t,errors:s,handleChange:n,sendOtp:a,otpSent:o,nextStep:i}){return e.jsxs("div",{className:"vendorform-step",children:[e.jsx("h3",{children:"Step 1: Personal Information"}),e.jsx("input",{type:"text",name:"firstName",placeholder:"First Name",value:t.firstName,onChange:n,className:"vendorform-input"}),s.firstName&&e.jsx("p",{className:"error-text",children:s.firstName}),e.jsx("input",{type:"text",name:"lastName",placeholder:"Last Name",value:t.lastName,onChange:n,className:"vendorform-input"}),s.lastName&&e.jsx("p",{className:"error-text",children:s.lastName}),e.jsxs("div",{children:[e.jsx("input",{type:"tel",name:"mobile",placeholder:"Mobile Number",value:t.mobile,onChange:n,className:"vendorform-input"}),e.jsx("button",{onClick:a,className:"otp-btn",children:"Send OTP"})]}),s.mobile&&e.jsx("p",{className:"error-text",children:s.mobile}),!o&&s.otp&&e.jsx("p",{className:"error-text",children:s.otp}),o&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"otp",placeholder:"Enter OTP",value:t.otp,onChange:n,className:"vendorform-input"}),s.otp&&e.jsx("p",{className:"error-text",children:s.otp})]}),e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:t.email,onChange:n,className:"vendorform-input"}),s.email&&e.jsx("p",{className:"error-text",children:s.email}),e.jsx("button",{onClick:i,className:"vendorform-btn",children:"Next"})]})}function ee({formData:t,errors:s,handleChange:n,prevStep:a,nextStep:o}){const[i,d]=m.useState([]);m.useState(!1);const p=async r=>{if(!(r.length<3))try{const j=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${r}`)).json();d(j)}catch(u){console.error("Error fetching address suggestions:",u)}},g=async r=>{n({target:{name:"shopAddress",value:r.display_name}});const u=r.address&&r.address.postcode?r.address.postcode:"";n({target:{name:"pincode",value:u}}),d([])};return e.jsxs("div",{className:"vendorform-step",children:[e.jsx("h3",{children:"Step 2: Shop & Tax Details"}),e.jsx("input",{type:"text",name:"shopName",placeholder:"Shop Name",value:t.shopName,onChange:n,className:"vendorform-input"}),s.shopName&&e.jsx("p",{className:"error-text",children:s.shopName}),e.jsx("input",{type:"text",name:"shopAddress",placeholder:"Enter Shop Address",value:t.shopAddress,onChange:r=>{n(r),p(r.target.value)},className:"vendorform-input"}),s.shopAddress&&e.jsx("p",{className:"error-text",children:s.shopAddress}),i.length>0&&e.jsx("ul",{className:"suggestions-list",children:i.map(r=>e.jsx("li",{onClick:()=>g(r),children:r.display_name},r.place_id))}),e.jsx("input",{type:"text",name:"shopFullAddress",placeholder:"Enter Full Shop Address (Optional)",value:t.shopFullAddress,onChange:n,className:"vendorform-input"}),e.jsx("input",{type:"text",name:"pincode",placeholder:"Pincode",value:t.pincode,onChange:n,className:"vendorform-input"}),s.pincode&&e.jsx("p",{className:"error-text",children:s.pincode}),e.jsx("input",{type:"text",name:"panNumber",placeholder:"PAN Number",value:t.panNumber,onChange:n,className:"vendorform-input"}),s.panNumber&&e.jsx("p",{className:"error-text",children:s.panNumber}),e.jsx("input",{type:"text",name:"gstNumber",placeholder:"GST Number (Optional)",value:t.gstNumber,onChange:n,className:"vendorform-input"}),s.gstNumber&&e.jsx("p",{className:"error-text",children:s.gstNumber}),e.jsx("button",{onClick:a,className:"vendorform-btn-back",children:"Back"}),e.jsx("button",{onClick:o,className:"vendorform-btn",children:"Next"})]})}function se(){const[t,s]=m.useState(1),n=A(),[a,o]=m.useState({firstName:"",lastName:"",shopName:"",shopAddress:"",shopFullAddress:"",gstNumber:"",pincode:"",mobile:"",otp:"",email:"",panNumber:""}),[i,d]=m.useState({}),[p,g]=m.useState(!1),r=()=>{let l={};return t===1&&(a.firstName.trim()||(l.firstName="First Name is required."),a.lastName.trim()||(l.lastName="Last Name is required."),a.mobile.match(/^\d{10}$/)||(l.mobile="Enter a valid 10-digit mobile number."),!p&&!a.otp&&(l.otp="Please enter the OTP."),a.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)||(l.email="Enter a valid email address.")),t===2&&(a.shopName.trim()||(l.shopName="Shop Name is required."),a.shopAddress.trim()||(l.shopAddress="Shop Address is required."),a.pincode.match(/^\d{6}$/)||(l.pincode="Enter a valid 6-digit Pincode."),a.panNumber.match(/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/)||(l.panNumber="Enter a valid PAN Number.")),d(l),Object.keys(l).length===0},u=l=>{o({...a,[l.target.name]:l.target.value}),d({...i,[l.target.name]:""})},j=()=>{if(!a.mobile.match(/^\d{10}$/)){d({...i,mobile:"Enter a valid 10-digit mobile number."});return}g(!0),alert("OTP sent to your mobile number!")},v=()=>{r()&&s(t+1)},b=()=>s(t-1),h=async()=>{console.log("Submitting Data:",a);try{const l=await fetch("http://127.0.0.1:8000/api/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),x=await l.text();console.log("Raw Response:",x);let S;try{S=JSON.parse(x)}catch(y){console.error("JSON Parse Error:",y),alert("Unexpected server response.");return}console.log("Server Response:",S),l.ok?(alert("Vendor Registration Successful!"),n("/vendor-homepage")):alert("Error: "+JSON.stringify(S))}catch(l){console.error("Fetch Error:",l)}};return e.jsxs("div",{className:"vendorform-container",children:[e.jsx("h2",{className:"vendorform-title",children:"Vendor Registration"}),e.jsx("div",{className:"step-indicator",children:["Personal Info","Shop & Tax Details","Confirmation"].map((l,x)=>e.jsxs("div",{className:`step ${t>=x+1?"active":""}`,children:[x+1,". ",l]},x))}),t===1&&e.jsx(D,{formData:a,errors:i,handleChange:u,sendOtp:j,otpSent:p,nextStep:v}),t===2&&e.jsx(ee,{formData:a,errors:i,handleChange:u,prevStep:b,nextStep:v}),t===3&&e.jsxs("div",{className:"vendorform-step",children:[e.jsx("h3",{children:"Step 3: Confirmation"}),e.jsx("p",{children:"Please review all details before submitting."}),e.jsx("button",{onClick:b,className:"vendorform-btn-back",children:"Back"}),e.jsx("button",{onClick:h,className:"vendorform-submit-btn",children:"Submit"})]})]})}function te(){return e.jsxs("div",{children:[e.jsx(E,{}),e.jsx(se,{})]})}function ae(){return e.jsx("div",{children:e.jsx(te,{})})}function ne(){return e.jsx("div",{children:e.jsx("h1",{children:"Welecome"})})}function oe(){return e.jsxs("div",{children:[e.jsx(E,{}),e.jsx("h2",{children:"Login Page"})]})}function re(){return e.jsx("div",{children:e.jsx(oe,{})})}function ie(){const t=R(),s=t.pathname==="/vender-dashboard"||t.pathname==="/user-login"||t.pathname==="/"||t.pathname==="/vendor-homepage";return e.jsxs(e.Fragment,{children:[!s&&e.jsx(C,{})," ",e.jsxs(G,{children:[e.jsx(O,{path:"/",element:e.jsx(Y,{})})," ",e.jsx(O,{path:"/vender-dashboard",element:e.jsx(ae,{})}),e.jsx(O,{path:"/user-login",element:e.jsx(re,{})}),e.jsx(O,{path:"/vendor-homepage",element:e.jsx(ne,{})})]})]})}w.createRoot(document.getElementById("root")).render(e.jsx(H,{children:e.jsx(ie,{})}));
